<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title><%= title %></title>

    <link type="text/css" rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css">
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="css/bubble.css">
    <link rel="stylesheet" href="css/chart.css">

    <script src="vendor/d3/d3.v3.js"></script>
    <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script>
        jQuery.noConflict();
    </script>

    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
    <script src="js/rickshaw.js"></script>

    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <style>

        body{
            background: black;         
        }
        
        #screenshot-content{

            background: black;
            color: white;
            margin-top: 20px;
        }
    </style>
</head>

<body id="page-top" class="index">
    <div id="skipnav"><a href="#maincontent">Skip to main content</a></div>

    <div class="container text-center" style="background: black;" id="screenshot-content">
        <div class="row mainarea">
            <div class="col-sm-12 col-xs-12 ui-data-element" id="team-1">
                <img src="<%= flag %>" class="img-responsive" alt="">
                <div class="intro-text">
                    <h1 class="name"><%= name %></h1>
                    <hr class="star-light">
                    <span id="bar"></span>
                </div>
            </div>
        </div>
    </div>
    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
    <div class="scroll-top page-scroll hidden-sm hidden-xs hidden-lg hidden-md">
        <a class="btn btn-primary" href="#page-top">
            <i class="fa fa-chevron-up"></i>
        </a>
    </div>

    
    <script>

        var $ = jQuery;

        var dataset = [<%= neg %>, <%= pos %>]
        bargraph(dataset);

      <%  console.log(dataset) %>
        <% console.log('heheeh) %>
        function bargraph(dataset) {
            //Width and height
            var w = 110;
            var h = 50;
            var barPadding = 5;
           
            if (dataset) {

                var sum = dataset.reduce((a, b) => a + b, 0);

                var tip = d3.tip()
                    .attr('class', 'd3-tip')
                    .offset([-10, 0])
                    .html(function(d, i) {
                        if (i == 0) {
                            return "<span style='color:red'>" + Math.round((d / sum) * 100) + "%</span>";
                        } else {
                            return "<span style='color:green'>" + Math.round((d / sum) * 100) + "%</span>";
                        }

                    });


                $('.d3-tip').hide();

                var svg = d3.select("#bar")
                    .append("svg")
                    .attr("width", w)
                    .attr("height", h);
            
                
                svg.call(tip);

            
                var rect = svg.selectAll("rect")
                    .data(dataset)
                    .enter()
                    .append("rect")
                    .attr("height", function(d) {
                        return 50;
                    })
                    .attr("x", function(d, i) {
                        return (i * dataset[0] / sum) * 100 + i * barPadding;
                    })
                    .attr("y", 0)
                    .attr("width", function(d) {
                        return (d / sum) * 100;
                    })
                    .attr("fill", function(d, i) {
                        if (i == 0) {
                            return "red"
                        } else {
                            return "green"
                        }
                    })
                    .on('mouseover', tip.show)
                    .on('mouseout', tip.hide);
            }
        }
        
    </script>

</body>

</html>
